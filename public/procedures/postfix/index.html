<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>üî• Nicolas Wailly AIS DevOPs üî•</title>
<meta name=keywords content><meta name=description content="Postfix Mail Server Configuration
This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.
Needs for this installation

A debian Machine
An active domain
A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email)

Installation


Update the package list and install Postfix:
sudo apt update
sudo apt install postfix


During installation, select &ldquo;Internet Site&rdquo; and enter your domain name."><meta name=author content="Nicolas Wailly"><link rel=canonical href=//localhost:1313/procedures/postfix/><link crossorigin=anonymous href=/assets/css/stylesheet.d72444526d7ecbdb0015438a7fa89054a658bf759d0542e2e5df81ce94b493ee.css integrity="sha256-1yREUm1+y9sAFUOKf6iQVKZYv3WdBULi5d+BzpS0k+4=" rel="preload stylesheet" as=style><link rel=icon href=//localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=//localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=//localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=//localhost:1313/apple-touch-icon.png><link rel=mask-icon href=//localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:1313/procedures/postfix/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="//localhost:1313/procedures/postfix/"><meta property="og:site_name" content="üî• Nicolas Wailly AIS DevOPs üî•"><meta property="og:title" content="üî• Nicolas Wailly AIS DevOPs üî•"><meta property="og:description" content="Postfix Mail Server Configuration This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.
Needs for this installation A debian Machine An active domain A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email) Installation Update the package list and install Postfix:
sudo apt update sudo apt install postfix During installation, select ‚ÄúInternet Site‚Äù and enter your domain name."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="procedures"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Postfix Mail Server Configuration
This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.
Needs for this installation

A debian Machine
An active domain
A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email)

Installation


Update the package list and install Postfix:
sudo apt update
sudo apt install postfix


During installation, select &ldquo;Internet Site&rdquo; and enter your domain name."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Procedures","item":"//localhost:1313/procedures/"},{"@type":"ListItem","position":2,"name":"","item":"//localhost:1313/procedures/postfix/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"Postfix Mail Server Configuration This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.\nNeeds for this installation A debian Machine An active domain A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email) Installation Update the package list and install Postfix:\nsudo apt update sudo apt install postfix During installation, select \u0026ldquo;Internet Site\u0026rdquo; and enter your domain name.\n","keywords":[],"articleBody":"Postfix Mail Server Configuration This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.\nNeeds for this installation A debian Machine An active domain A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email) Installation Update the package list and install Postfix:\nsudo apt update sudo apt install postfix During installation, select ‚ÄúInternet Site‚Äù and enter your domain name.\nConfiguration Postfix Configuration Edit the Postfix main configuration file /etc/postfix/main.cf:\n# Basic Configuration myhostname = mail.example.com mydomain = example.com myorigin = $mydomain inet_interfaces = all inet_protocols = ipv4 mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain relayhost = # Trusted Networks mynetworks = 127.0.0.0/8, [::1]/128 # Mailbox Directory home_mailbox = Maildir/ # Security smtpd_banner = $myhostname ESMTP $mail_name (Ubuntu) biff = no append_dot_mydomain = no # TLS Settings (if necessary) # smtpd_tls_cert_file = /etc/ssl/certs/mail.example.com.crt # smtpd_tls_key_file = /etc/ssl/private/mail.example.com.key # smtpd_use_tls = yes # smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache # smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache TLS configuration is not always necessary.\nAfter completing the configuration, restart the Postfix service:\nsudo systemctl restart postfix Useful commands to test your Postfix configuration:\necho \"email content\" | mail -s \"email subject\" address@mail echo \"email content\" | mutt -s \"email subject\" -a /path/to/attachment -- address@mail Check your target email address; if you receive the email, you have successfully configured your self-hosted mail server.\nLimitations of Webmail in Postfix Configuration Access to emails: Postfix does not provide an IMAP or POP3 server to access emails remotely. For this, you would need an additional server like Dovecot. Webmail: If you want to access your emails via a web interface, you will need to install a solution like Roundcube, which also requires an IMAP server. Anti-spam and antivirus: Postfix alone does not provide protection against spam and viruses. You will need to configure additional solutions like SpamAssassin and ClamAV. TLS/SSL: To secure communications with TLS/SSL, you will need to configure the necessary certificates and enable TLS options in Postfix‚Äôs configuration. Glossary SMTP (Simple Mail Transfer Protocol) is the standard protocol used for sending emails over the Internet.\nIMAP (Internet Message Access Protocol) is a protocol used by email clients to retrieve emails from a mail server. It allows users to access their email messages from multiple devices, while leaving the messages stored on the server.\nPOP3 (Post Office Protocol version 3) is another protocol used for retrieving emails from a remote server to a local client. Unlike IMAP, POP3 typically downloads emails to the client, which are then usually deleted from the server, although this behavior can be configured.\nTLS (Transport Layer Security) and SSL (Secure Sockets Layer) are cryptographic protocols that provide secure communication over a computer network. In the context of email, TLS/SSL is used to encrypt the communication between email clients or servers, ensuring that emails are transmitted securely and cannot be easily intercepted by third parties.\n","wordCount":"481","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Nicolas Wailly"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:1313/procedures/postfix/"},"publisher":{"@type":"Organization","name":"üî• Nicolas Wailly AIS DevOPs üî•","logo":{"@type":"ImageObject","url":"//localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:1313/ accesskey=h title="Nicolas Wailly DevOPS-AIS (Alt + H)"><img src=//localhost:1313/images/Logo.jpeg alt aria-label=logo height=50>Nicolas Wailly DevOPS-AIS</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=//localhost:1313/devops/ title=DevOPS><span>DevOPS</span></a></li><li><a href=//localhost:1313/ais/ title=AIS><span>AIS</span></a></li><li><a href=//localhost:1313/projets/ title=Projets><span>Projets</span></a></li><li><a href=//localhost:1313/a-propos/ title="A propos"><span>A propos</span></a></li><li><a href=//localhost:1313/procedures/ title=Procedures><span>Procedures</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:1313/>Home</a>&nbsp;¬ª&nbsp;<a href=//localhost:1313/procedures/>Procedures</a></div><h1 class="post-title entry-hint-parent"></h1><div class=post-meta>3 min&nbsp;¬∑&nbsp;Nicolas Wailly</div></header><div class=post-content><h1 id=postfix-mail-server-configuration>Postfix Mail Server Configuration<a hidden class=anchor aria-hidden=true href=#postfix-mail-server-configuration>#</a></h1><p>This document provides the configuration steps for setting up a Postfix mail server on a Linux machine.</p><h2 id=needs-for-this-installation><strong>Needs for this installation</strong><a hidden class=anchor aria-hidden=true href=#needs-for-this-installation>#</a></h2><ul><li>A debian Machine</li><li>An active domain</li><li>A relayhost mail // You can install a dovecot server for made IMAP ou POP3 Configuration (needed for email)</li></ul><h2 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h2><ol><li><p><strong>Update the package list and install Postfix:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install postfix
</span></span></code></pre></div></li><li><p><strong>During installation, select &ldquo;Internet Site&rdquo; and enter your domain name.</strong></p></li></ol><h2 id=configuration>Configuration<a hidden class=anchor aria-hidden=true href=#configuration>#</a></h2><h3 id=postfix-configuration>Postfix Configuration<a hidden class=anchor aria-hidden=true href=#postfix-configuration>#</a></h3><p>Edit the Postfix main configuration file <code>/etc/postfix/main.cf</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#75715e># Basic Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>myhostname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>mail.example.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>mydomain</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>example.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>myorigin</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>$mydomain</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>inet_interfaces</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>all</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>inet_protocols</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>ipv4</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>mydestination</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>$myhostname, localhost.$mydomain, localhost, $mydomain</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>relayhost</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Trusted Networks</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>mynetworks</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>127.0.0.0/8, [::1]/128</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mailbox Directory</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>home_mailbox</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>Maildir/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Security</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>smtpd_banner</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>$myhostname ESMTP $mail_name (Ubuntu)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>biff</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>no</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>append_dot_mydomain</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>no</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># TLS Settings (if necessary)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># smtpd_tls_cert_file = /etc/ssl/certs/mail.example.com.crt</span>
</span></span><span style=display:flex><span><span style=color:#75715e># smtpd_tls_key_file = /etc/ssl/private/mail.example.com.key</span>
</span></span><span style=display:flex><span><span style=color:#75715e># smtpd_use_tls = yes</span>
</span></span><span style=display:flex><span><span style=color:#75715e># smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache</span>
</span></span><span style=display:flex><span><span style=color:#75715e># smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache</span>
</span></span></code></pre></div><p><em>TLS configuration is not always necessary.</em></p><p>After completing the configuration, restart the Postfix service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>sudo systemctl restart postfix
</span></span></code></pre></div><p>Useful commands to test your Postfix configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>echo <span style=color:#e6db74>&#34;email content&#34;</span> | mail -s <span style=color:#e6db74>&#34;email subject&#34;</span> address@mail
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;email content&#34;</span> | mutt -s <span style=color:#e6db74>&#34;email subject&#34;</span> -a /path/to/attachment -- address@mail
</span></span></code></pre></div><p>Check your target email address; if you receive the email, you have successfully configured your self-hosted mail server.</p><h2 id=limitations-of-webmail-in-postfix-configuration>Limitations of Webmail in Postfix Configuration<a hidden class=anchor aria-hidden=true href=#limitations-of-webmail-in-postfix-configuration>#</a></h2><ul><li>Access to emails: Postfix does not provide an IMAP or POP3 server to access emails remotely. For this, you would need an additional server like Dovecot.</li><li>Webmail: If you want to access your emails via a web interface, you will need to install a solution like Roundcube, which also requires an IMAP server.</li><li>Anti-spam and antivirus: Postfix alone does not provide protection against spam and viruses. You will need to configure additional solutions like SpamAssassin and ClamAV.</li><li>TLS/SSL: To secure communications with TLS/SSL, you will need to configure the necessary certificates and enable TLS options in Postfix&rsquo;s configuration.</li></ul><h2 id=glossary>Glossary<a hidden class=anchor aria-hidden=true href=#glossary>#</a></h2><ul><li><p>SMTP (Simple Mail Transfer Protocol) is the standard protocol used for sending emails over the Internet.</p></li><li><p>IMAP (Internet Message Access Protocol) is a protocol used by email clients to retrieve emails from a mail server. It allows users to access their email messages from multiple devices, while leaving the messages stored on the server.</p></li><li><p>POP3 (Post Office Protocol version 3) is another protocol used for retrieving emails from a remote server to a local client. Unlike IMAP, POP3 typically downloads emails to the client, which are then usually deleted from the server, although this behavior can be configured.</p></li><li><p>TLS (Transport Layer Security) and SSL (Secure Sockets Layer) are cryptographic protocols that provide secure communication over a computer network. In the context of email, TLS/SSL is used to encrypt the communication between email clients or servers, ensuring that emails are transmitted securely and cannot be easily intercepted by third parties.</p></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=//localhost:1313/procedures/playbookansible/><span class=title>¬´ Prev</span><br><span></span>
</a><a class=next href=//localhost:1313/procedures/vaultwarden/><span class=title>Next ¬ª</span><br><span></span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=//localhost:1313/>üî• Nicolas Wailly AIS DevOPs üî•</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>