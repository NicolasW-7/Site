<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>üî• Nicolas Wailly AIS DevOPs üî•</title>
<meta name=keywords content><meta name=description content="NextCloud sur Debian
Support Nextcloud : https://github.com/nextcloud
Qu&rsquo;est-ce que Nextcloud ?
Nextcloud est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :

  
      
          Cat√©gorie
          Fonctionnalit√©s
      
  
  
      
          Stockage de Fichiers
          - Gestion des fichiers : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©.
      
      
          
          - Partage : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser.
      
      
          Collaboration
          - Calendriers partag√©s : G√©rez et partagez des calendriers avec vos coll√®gues.
      
      
          
          - Contacts : Centralisez vos contacts et partagez-les facilement.
      
      
          
          - Applications int√©gr√©es : Utilisez des outils pour la gestion des t√¢ches et des projets.
      
      
          S√©curit√© et Confidentialit√©
          - Chiffrement : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement.
      
      
          
          - Contr√¥les d&rsquo;acc√®s : D√©finissez des r√®gles pr√©cises pour l&rsquo;acc√®s aux fichiers et aux donn√©es.
      
      
          
          - Politique de s√©curit√© : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins.
      
      
          Extensibilit√©
          - Applications suppl√©mentaires : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces.
      
      
          
          - Int√©grations : Connectez Nextcloud √† d&rsquo;autres outils et services selon vos besoins.
      
      
          D√©ploiement
          - Installation : D√©ployez Nextcloud sur des serveurs personnels ou professionnels.
      
      
          
          - Contr√¥le local : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local.
      
  

En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel."><meta name=author content="Nicolas Wailly"><link rel=canonical href=//localhost:1313/procedures/nextcloud/><link crossorigin=anonymous href=/assets/css/stylesheet.d72444526d7ecbdb0015438a7fa89054a658bf759d0542e2e5df81ce94b493ee.css integrity="sha256-1yREUm1+y9sAFUOKf6iQVKZYv3WdBULi5d+BzpS0k+4=" rel="preload stylesheet" as=style><link rel=icon href=//localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=//localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=//localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=//localhost:1313/apple-touch-icon.png><link rel=mask-icon href=//localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:1313/procedures/nextcloud/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="//localhost:1313/procedures/nextcloud/"><meta property="og:site_name" content="üî• Nicolas Wailly AIS DevOPs üî•"><meta property="og:title" content="üî• Nicolas Wailly AIS DevOPs üî•"><meta property="og:description" content="NextCloud sur Debian Support Nextcloud : https://github.com/nextcloud
Qu‚Äôest-ce que Nextcloud ? Nextcloud est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :
Cat√©gorie Fonctionnalit√©s Stockage de Fichiers - Gestion des fichiers : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©. - Partage : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser. Collaboration - Calendriers partag√©s : G√©rez et partagez des calendriers avec vos coll√®gues. - Contacts : Centralisez vos contacts et partagez-les facilement. - Applications int√©gr√©es : Utilisez des outils pour la gestion des t√¢ches et des projets. S√©curit√© et Confidentialit√© - Chiffrement : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement. - Contr√¥les d‚Äôacc√®s : D√©finissez des r√®gles pr√©cises pour l‚Äôacc√®s aux fichiers et aux donn√©es. - Politique de s√©curit√© : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins. Extensibilit√© - Applications suppl√©mentaires : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces. - Int√©grations : Connectez Nextcloud √† d‚Äôautres outils et services selon vos besoins. D√©ploiement - Installation : D√©ployez Nextcloud sur des serveurs personnels ou professionnels. - Contr√¥le local : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local. En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="procedures"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="NextCloud sur Debian
Support Nextcloud : https://github.com/nextcloud
Qu&rsquo;est-ce que Nextcloud ?
Nextcloud est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :

  
      
          Cat√©gorie
          Fonctionnalit√©s
      
  
  
      
          Stockage de Fichiers
          - Gestion des fichiers : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©.
      
      
          
          - Partage : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser.
      
      
          Collaboration
          - Calendriers partag√©s : G√©rez et partagez des calendriers avec vos coll√®gues.
      
      
          
          - Contacts : Centralisez vos contacts et partagez-les facilement.
      
      
          
          - Applications int√©gr√©es : Utilisez des outils pour la gestion des t√¢ches et des projets.
      
      
          S√©curit√© et Confidentialit√©
          - Chiffrement : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement.
      
      
          
          - Contr√¥les d&rsquo;acc√®s : D√©finissez des r√®gles pr√©cises pour l&rsquo;acc√®s aux fichiers et aux donn√©es.
      
      
          
          - Politique de s√©curit√© : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins.
      
      
          Extensibilit√©
          - Applications suppl√©mentaires : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces.
      
      
          
          - Int√©grations : Connectez Nextcloud √† d&rsquo;autres outils et services selon vos besoins.
      
      
          D√©ploiement
          - Installation : D√©ployez Nextcloud sur des serveurs personnels ou professionnels.
      
      
          
          - Contr√¥le local : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local.
      
  

En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Procedures","item":"//localhost:1313/procedures/"},{"@type":"ListItem","position":2,"name":"","item":"//localhost:1313/procedures/nextcloud/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"NextCloud sur Debian Support Nextcloud : https://github.com/nextcloud\nQu\u0026rsquo;est-ce que Nextcloud ? Nextcloud est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :\nCat√©gorie Fonctionnalit√©s Stockage de Fichiers - Gestion des fichiers : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©. - Partage : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser. Collaboration - Calendriers partag√©s : G√©rez et partagez des calendriers avec vos coll√®gues. - Contacts : Centralisez vos contacts et partagez-les facilement. - Applications int√©gr√©es : Utilisez des outils pour la gestion des t√¢ches et des projets. S√©curit√© et Confidentialit√© - Chiffrement : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement. - Contr√¥les d\u0026rsquo;acc√®s : D√©finissez des r√®gles pr√©cises pour l\u0026rsquo;acc√®s aux fichiers et aux donn√©es. - Politique de s√©curit√© : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins. Extensibilit√© - Applications suppl√©mentaires : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces. - Int√©grations : Connectez Nextcloud √† d\u0026rsquo;autres outils et services selon vos besoins. D√©ploiement - Installation : D√©ployez Nextcloud sur des serveurs personnels ou professionnels. - Contr√¥le local : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local. En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel.\n","keywords":[],"articleBody":"NextCloud sur Debian Support Nextcloud : https://github.com/nextcloud\nQu‚Äôest-ce que Nextcloud ? Nextcloud est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :\nCat√©gorie Fonctionnalit√©s Stockage de Fichiers - Gestion des fichiers : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©. - Partage : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser. Collaboration - Calendriers partag√©s : G√©rez et partagez des calendriers avec vos coll√®gues. - Contacts : Centralisez vos contacts et partagez-les facilement. - Applications int√©gr√©es : Utilisez des outils pour la gestion des t√¢ches et des projets. S√©curit√© et Confidentialit√© - Chiffrement : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement. - Contr√¥les d‚Äôacc√®s : D√©finissez des r√®gles pr√©cises pour l‚Äôacc√®s aux fichiers et aux donn√©es. - Politique de s√©curit√© : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins. Extensibilit√© - Applications suppl√©mentaires : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces. - Int√©grations : Connectez Nextcloud √† d‚Äôautres outils et services selon vos besoins. D√©ploiement - Installation : D√©ployez Nextcloud sur des serveurs personnels ou professionnels. - Contr√¥le local : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local. En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel.\nPr√©requis Serveur : Serveur physique ou virtuel avec : CPU : 2 c≈ìurs minimum RAM : 4 Go minimum Stockage : Pr√©voir suffisamment d‚Äôespace pour vos donn√©es (1 To ou plus recommand√©) Pr√©voir le RAID √† utiliser si besoin (cf.#Bonus en bas de page). Syst√®me d‚Äôexploitation : Linux (Ubuntu 22.04, Debian 11, CentOS, etc.) Acc√®s administrateur : Root ou utilisateur avec privil√®ges sudo. Installation de Nextcloud Pour cette installation on travail √† partir d‚Äôune machine Debian12 sans interface de bureau avec une prise de contr√¥le √† distance (SSH)\nMise √† jour du syst√®me Avant de commencer l‚Äôinstallation, assurez-vous que votre syst√®me est √† jour :\nsudo apt update \u0026\u0026 apt-get upgrade Installation des d√©pendances Installez les paquets n√©cessaires pour Nextcloud :\napt-get -y install apache2 curl apache2-doc apache2-utils libapache2-mod-php8.2 php8.2 php8.2-common php8.2-gd php8.2-mysql php8.2-imap php8.2-cli libapache2-mod-fcgid apache2-suexec-pristine php-pear mcrypt imagemagick libruby libapache2-mod-python php8.2-curl php8.2-intl php8.2-pspell php8.2-sqlite3 php8.2-tidy php8.2-xmlrpc php8.2-xsl php-imagick php8.2-zip php8.2-mbstring php8.2-soap php8.2-fpm php8.2-opcache php8.2-apcu a2enmod suexec rewrite ssl include dav_fs dav auth_digest expires headers fastcgi actions proxy_fcgi a2enconf php8.2-fpm unzip (Optionnel) Si vous rencontrer un probl√®me avec le paquet php8.2\nAjouter le d√©p√¥t Sury pour PHP : Ex√©cutez les commandes suivantes pour ajouter le d√©p√¥t Sury √† votre syst√®me :\nsudo apt update sudo apt install -y lsb-release ca-certificates apt-transport-https software-properties-common gnupg2 Ajouter le d√©p√¥t Sury sudo wget -qO /etc/apt/trusted.gpg.d/sury-php.gpg https://packages.sury.org/php/apt.gpg echo \"deb https://packages.sury.org/php/ $(lsb_release -sc) main\" | sudo tee /etc/apt/sources.list.d/php.list Mettre √† jour les d√©p√¥ts et installer PHP 8.2 FPM : sudo apt update sudo apt install -y php8.2-fpm Configuration de MariaDB Installer MariaDB \u0026 lancer MariaDB\nsudo apt install mariadb-server mariadb-client sudo systemctl start mariadb sudo systemctl enable mariadb 1. S√©curisez l‚Äôinstallation de MariaDB : sudo mysql_secure_installation Suivez les instructions pour configurer le mot de passe root et s√©curiser votre installation.\n2. Connectez-vous √† MariaDB : sudo mysql -u root -p 3. Cr√©ez une base de donn√©es et un utilisateur pour Nextcloud : Entr√©e les lignes suivantes √† la suite les unes des autres\nCREATE DATABASE nextcloud; CREATE USER 'nextclouduser'@'localhost' IDENTIFIED BY 'motdepasse'; GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextclouduser'@'localhost'; FLUSH PRIVILEGES; EXIT; Remplacez ‚Äòmotdepasse‚Äô par un mot de passe s√©curis√©. Conservez bien ces informations elle vous seront redemand√©e plus tard par nextcloud pour installer la base de donn√©es\nInstallation de Nextcloud 1. T√©l√©chargez la derni√®re version de Nextcloud : Allez sur le site de Nextcloud pour obtenir le lien de t√©l√©chargement ou utilisez wget :\nwget https://download.nextcloud.com/server/releases/latest.zip 2. D√©compressez l‚Äôarchive et d√©placez les fichiers : unzip latest.zip #Optionnel rm latest.zip sudo mv nextcloud /var/www/html/ 3. D√©finissez les permissions appropri√©es \u0026 structure du projet : groupadd web001 useradd -M -g web001 -s /usr/sbin/nologin web001 mkdir -p /var/www/nextcloud/web mkdir -p /var/www/nextcloud/log mkdir -p /var/www/nextcloud/tmp chown -R web001:web001 /var/www/nextcloud/web chown -R web001:web001 /var/www/nextcloud/tmp Configuration PHP FPM On cr√©e le fichier suivant :\nnano /etc/php/8.2/fpm/pool.d/VotreNomDeServeur.conf Vous pouvez copier en le modifiant ceci:\n[VotreNomDeServeur] listen = /run/php/VotreNomDeServeur.sock listen.owner = web0 listen.group = www-data listen.mode = 0660 user = web001 group = web001 pm = dynamic pm.max_children = 10 pm.start_servers = 2 pm.min_spare_servers = 1 pm.max_spare_servers = 5 pm.max_requests = 0 chdir = / php_admin_value[open_basedir] = /var/www/nextcloud/web:/var/www/nextcloud/tmp:/usr/share/php:/tmp:/dev/urandom:/ php_admin_value[session.save_path] = /var/www/nextcloud/tmp php_admin_value[upload_tmp_dir] = /var/www/nextcloud/tmp php_admin_value[sendmail_path] = \"/usr/sbin/sendmail -t -i -VotreNomDeServeur\" Cr√©ation du Vhost sudo nano /etc/apache2/sites-available/VotreNomNextcloud.conf Ajoutez le contenu suivant :\n","wordCount":"1859","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Nicolas Wailly"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:1313/procedures/nextcloud/"},"publisher":{"@type":"Organization","name":"üî• Nicolas Wailly AIS DevOPs üî•","logo":{"@type":"ImageObject","url":"//localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:1313/ accesskey=h title="Nicolas Wailly DevOPS-AIS (Alt + H)"><img src=//localhost:1313/images/Logo.jpeg alt aria-label=logo height=50>Nicolas Wailly DevOPS-AIS</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=//localhost:1313/devops/ title=DevOPS><span>DevOPS</span></a></li><li><a href=//localhost:1313/ais/ title=AIS><span>AIS</span></a></li><li><a href=//localhost:1313/projets/ title=Projets><span>Projets</span></a></li><li><a href=//localhost:1313/a-propos/ title="A propos"><span>A propos</span></a></li><li><a href=//localhost:1313/procedures/ title=Procedures><span>Procedures</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:1313/>Home</a>&nbsp;¬ª&nbsp;<a href=//localhost:1313/procedures/>Procedures</a></div><h1 class="post-title entry-hint-parent"></h1><div class=post-meta>9 min&nbsp;¬∑&nbsp;Nicolas Wailly</div></header><div class=post-content><h1 id=nextcloud-sur-debian>NextCloud sur Debian<a hidden class=anchor aria-hidden=true href=#nextcloud-sur-debian>#</a></h1><p><strong>Support Nextcloud</strong> : <a href=https://github.com/nextcloud>https://github.com/nextcloud</a></p><h1 id=quest-ce-que-nextcloud->Qu&rsquo;est-ce que Nextcloud ?<a hidden class=anchor aria-hidden=true href=#quest-ce-que-nextcloud->#</a></h1><p><strong>Nextcloud</strong> est une plateforme open-source pour le stockage et la collaboration en ligne, offrant une solution compl√®te pour la gestion des fichiers et la collaboration en √©quipe. Voici un aper√ßu de ses principales fonctionnalit√©s :</p><table><thead><tr><th><strong>Cat√©gorie</strong></th><th><strong>Fonctionnalit√©s</strong></th></tr></thead><tbody><tr><td><strong>Stockage de Fichiers</strong></td><td>- <strong>Gestion des fichiers</strong> : Stockez, synchronisez et partagez vos fichiers en toute s√©curit√©.</td></tr><tr><td></td><td>- <strong>Partage</strong> : Contr√¥lez qui peut acc√©der √† vos fichiers et comment ils peuvent les utiliser.</td></tr><tr><td><strong>Collaboration</strong></td><td>- <strong>Calendriers partag√©s</strong> : G√©rez et partagez des calendriers avec vos coll√®gues.</td></tr><tr><td></td><td>- <strong>Contacts</strong> : Centralisez vos contacts et partagez-les facilement.</td></tr><tr><td></td><td>- <strong>Applications int√©gr√©es</strong> : Utilisez des outils pour la gestion des t√¢ches et des projets.</td></tr><tr><td><strong>S√©curit√© et Confidentialit√©</strong></td><td>- <strong>Chiffrement</strong> : Prot√©gez vos donn√©es avec des fonctionnalit√©s de chiffrement.</td></tr><tr><td></td><td>- <strong>Contr√¥les d&rsquo;acc√®s</strong> : D√©finissez des r√®gles pr√©cises pour l&rsquo;acc√®s aux fichiers et aux donn√©es.</td></tr><tr><td></td><td>- <strong>Politique de s√©curit√©</strong> : Configurez des politiques de s√©curit√© adapt√©es √† vos besoins.</td></tr><tr><td><strong>Extensibilit√©</strong></td><td>- <strong>Applications suppl√©mentaires</strong> : √âtendez les fonctionnalit√©s de Nextcloud avec des applications tierces.</td></tr><tr><td></td><td>- <strong>Int√©grations</strong> : Connectez Nextcloud √† d&rsquo;autres outils et services selon vos besoins.</td></tr><tr><td><strong>D√©ploiement</strong></td><td>- <strong>Installation</strong> : D√©ployez Nextcloud sur des serveurs personnels ou professionnels.</td></tr><tr><td></td><td>- <strong>Contr√¥le local</strong> : Gardez le contr√¥le total de vos donn√©es avec un d√©ploiement local.</td></tr></tbody></table><p>En r√©sum√©, Nextcloud est une solution flexible et s√©curis√©e pour la gestion et le partage de fichiers, adapt√©e aussi bien pour un usage personnel que professionnel.</p><h2 id=pr√©requis>Pr√©requis<a hidden class=anchor aria-hidden=true href=#pr√©requis>#</a></h2><ul><li><strong>Serveur</strong> : Serveur physique ou virtuel avec :<ul><li><strong>CPU</strong> : 2 c≈ìurs minimum</li><li><strong>RAM</strong> : 4 Go minimum</li><li><strong>Stockage</strong> : Pr√©voir suffisamment d&rsquo;espace pour vos donn√©es (1 To ou plus recommand√©) Pr√©voir le RAID √† utiliser si besoin (cf.#Bonus en bas de page).</li></ul></li><li><strong>Syst√®me d&rsquo;exploitation</strong> : Linux (Ubuntu 22.04, Debian 11, CentOS, etc.)</li><li><strong>Acc√®s administrateur</strong> : Root ou utilisateur avec privil√®ges <code>sudo</code>.</li></ul><h2 id=installation-de-nextcloud>Installation de Nextcloud<a hidden class=anchor aria-hidden=true href=#installation-de-nextcloud>#</a></h2><p><em>Pour cette installation on travail √† partir d&rsquo;une machine Debian12 sans interface de bureau avec une prise de contr√¥le √† distance (SSH)</em></p><h3 id=mise-√†-jour-du-syst√®me>Mise √† jour du syst√®me<a hidden class=anchor aria-hidden=true href=#mise-√†-jour-du-syst√®me>#</a></h3><p>Avant de commencer l&rsquo;installation, assurez-vous que votre syst√®me est √† jour :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> apt-get upgrade
</span></span></code></pre></div><h3 id=installation-des-d√©pendances>Installation des d√©pendances<a hidden class=anchor aria-hidden=true href=#installation-des-d√©pendances>#</a></h3><p>Installez les paquets n√©cessaires pour Nextcloud :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get -y install apache2 curl apache2-doc apache2-utils libapache2-mod-php8.2 php8.2 php8.2-common php8.2-gd php8.2-mysql php8.2-imap php8.2-cli libapache2-mod-fcgid apache2-suexec-pristine php-pear mcrypt imagemagick libruby libapache2-mod-python php8.2-curl php8.2-intl php8.2-pspell php8.2-sqlite3 php8.2-tidy php8.2-xmlrpc php8.2-xsl php-imagick php8.2-zip php8.2-mbstring php8.2-soap php8.2-fpm php8.2-opcache php8.2-apcu a2enmod suexec rewrite ssl include dav_fs dav auth_digest expires headers fastcgi actions proxy_fcgi a2enconf php8.2-fpm unzip
</span></span></code></pre></div><h4 id=optionnel>(Optionnel)<a hidden class=anchor aria-hidden=true href=#optionnel>#</a></h4><p>Si vous rencontrer un probl√®me avec le paquet php8.2</p><ul><li>Ajouter le d√©p√¥t Sury pour PHP :</li></ul><p>Ex√©cutez les commandes suivantes pour ajouter le d√©p√¥t Sury √† votre syst√®me :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install -y lsb-release ca-certificates apt-transport-https software-properties-common gnupg2
</span></span></code></pre></div><ul><li>Ajouter le d√©p√¥t Sury</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo wget -qO /etc/apt/trusted.gpg.d/sury-php.gpg https://packages.sury.org/php/apt.gpg
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;deb https://packages.sury.org/php/ </span><span style=color:#66d9ef>$(</span>lsb_release -sc<span style=color:#66d9ef>)</span><span style=color:#e6db74> main&#34;</span> | sudo tee /etc/apt/sources.list.d/php.list
</span></span></code></pre></div><ul><li>Mettre √† jour les d√©p√¥ts et installer PHP 8.2 FPM :</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install -y php8.2-fpm
</span></span></code></pre></div><h3 id=configuration-de-mariadb>Configuration de MariaDB<a hidden class=anchor aria-hidden=true href=#configuration-de-mariadb>#</a></h3><p>Installer MariaDB & lancer MariaDB</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install mariadb-server mariadb-client
</span></span><span style=display:flex><span>sudo systemctl start mariadb
</span></span><span style=display:flex><span>sudo systemctl enable mariadb
</span></span></code></pre></div><h4 id=1-s√©curisez-linstallation-de-mariadb->1. S√©curisez l&rsquo;installation de MariaDB :<a hidden class=anchor aria-hidden=true href=#1-s√©curisez-linstallation-de-mariadb->#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mysql_secure_installation
</span></span></code></pre></div><p>Suivez les instructions pour configurer le mot de passe root et s√©curiser votre installation.</p><h4 id=2-connectez-vous-√†-mariadb->2. Connectez-vous √† MariaDB :<a hidden class=anchor aria-hidden=true href=#2-connectez-vous-√†-mariadb->#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mysql -u root -p
</span></span></code></pre></div><h4 id=3-cr√©ez-une-base-de-donn√©es-et-un-utilisateur-pour-nextcloud->3. Cr√©ez une base de donn√©es et un utilisateur pour Nextcloud :<a hidden class=anchor aria-hidden=true href=#3-cr√©ez-une-base-de-donn√©es-et-un-utilisateur-pour-nextcloud->#</a></h4><p><em>Entr√©e les lignes suivantes √† la suite les unes des autres</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> nextcloud;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> <span style=color:#e6db74>&#39;nextclouduser&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span> IDENTIFIED <span style=color:#66d9ef>BY</span> <span style=color:#e6db74>&#39;motdepasse&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> nextcloud.<span style=color:#f92672>*</span> <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;nextclouduser&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span><span style=display:flex><span>FLUSH <span style=color:#66d9ef>PRIVILEGES</span>;
</span></span><span style=display:flex><span>EXIT;
</span></span></code></pre></div><p><em>Remplacez &lsquo;motdepasse&rsquo; par un mot de passe s√©curis√©.</em>
<strong>Conservez bien ces informations elle vous seront redemand√©e plus tard par nextcloud pour installer la base de donn√©es</strong></p><h3 id=installation-de-nextcloud-1>Installation de Nextcloud<a hidden class=anchor aria-hidden=true href=#installation-de-nextcloud-1>#</a></h3><h4 id=1-t√©l√©chargez-la-derni√®re-version-de-nextcloud->1. T√©l√©chargez la derni√®re version de Nextcloud :<a hidden class=anchor aria-hidden=true href=#1-t√©l√©chargez-la-derni√®re-version-de-nextcloud->#</a></h4><p>Allez sur le site de Nextcloud pour obtenir le lien de t√©l√©chargement ou utilisez wget :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://download.nextcloud.com/server/releases/latest.zip
</span></span></code></pre></div><h4 id=2-d√©compressez-larchive-et-d√©placez-les-fichiers->2. D√©compressez l&rsquo;archive et d√©placez les fichiers :<a hidden class=anchor aria-hidden=true href=#2-d√©compressez-larchive-et-d√©placez-les-fichiers->#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>unzip latest.zip
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Optionnel</span>
</span></span><span style=display:flex><span>rm latest.zip
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo mv nextcloud /var/www/html/
</span></span></code></pre></div><h4 id=3-d√©finissez-les-permissions-appropri√©es--structure-du-projet->3. D√©finissez les permissions appropri√©es & structure du projet :<a hidden class=anchor aria-hidden=true href=#3-d√©finissez-les-permissions-appropri√©es--structure-du-projet->#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>groupadd web001
</span></span><span style=display:flex><span>useradd -M -g web001 -s /usr/sbin/nologin web001
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mkdir -p /var/www/nextcloud/web
</span></span><span style=display:flex><span>mkdir -p /var/www/nextcloud/log
</span></span><span style=display:flex><span>mkdir -p /var/www/nextcloud/tmp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chown -R web001:web001 /var/www/nextcloud/web
</span></span><span style=display:flex><span>chown -R web001:web001 /var/www/nextcloud/tmp
</span></span></code></pre></div><h3 id=configuration-php-fpm>Configuration PHP FPM<a hidden class=anchor aria-hidden=true href=#configuration-php-fpm>#</a></h3><p>On cr√©e le fichier suivant :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/php/8.2/fpm/pool.d/VotreNomDeServeur.conf
</span></span></code></pre></div><p>Vous pouvez copier en le modifiant ceci:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>[<span style=color:#a6e22e>VotreNomDeServeur</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>listen</span> <span style=color:#f92672>=</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>run</span><span style=color:#f92672>/</span><span style=color:#a6e22e>php</span><span style=color:#f92672>/</span><span style=color:#a6e22e>VotreNomDeServeur</span><span style=color:#f92672>.</span><span style=color:#a6e22e>sock</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>listen</span><span style=color:#f92672>.</span><span style=color:#a6e22e>owner</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>web0</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>listen</span><span style=color:#f92672>.</span><span style=color:#a6e22e>group</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>www</span><span style=color:#f92672>-</span><span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>listen</span><span style=color:#f92672>.</span><span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0660</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>web001</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>group</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>web001</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>dynamic</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span><span style=color:#f92672>.</span><span style=color:#a6e22e>max_children</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span><span style=color:#f92672>.</span><span style=color:#a6e22e>start_servers</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span><span style=color:#f92672>.</span><span style=color:#a6e22e>min_spare_servers</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span><span style=color:#f92672>.</span><span style=color:#a6e22e>max_spare_servers</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>pm</span><span style=color:#f92672>.</span><span style=color:#a6e22e>max_requests</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>chdir</span> <span style=color:#f92672>=</span> <span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>php_admin_value</span>[<span style=color:#a6e22e>open_basedir</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span><span style=color:#a6e22e>www</span><span style=color:#f92672>/</span><span style=color:#a6e22e>nextcloud</span><span style=color:#f92672>/</span><span style=color:#a6e22e>web</span><span style=color:#f92672>:/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span><span style=color:#a6e22e>www</span><span style=color:#f92672>/</span><span style=color:#a6e22e>nextcloud</span><span style=color:#f92672>/</span><span style=color:#a6e22e>tmp</span><span style=color:#f92672>:/</span><span style=color:#a6e22e>usr</span><span style=color:#f92672>/</span><span style=color:#a6e22e>share</span><span style=color:#f92672>/</span><span style=color:#a6e22e>php</span><span style=color:#f92672>:/</span><span style=color:#a6e22e>tmp</span><span style=color:#f92672>:/</span><span style=color:#a6e22e>dev</span><span style=color:#f92672>/</span><span style=color:#a6e22e>urandom</span><span style=color:#f92672>:/</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>php_admin_value</span>[<span style=color:#a6e22e>session</span><span style=color:#f92672>.</span><span style=color:#a6e22e>save_path</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span><span style=color:#a6e22e>www</span><span style=color:#f92672>/</span><span style=color:#a6e22e>nextcloud</span><span style=color:#f92672>/</span><span style=color:#a6e22e>tmp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>php_admin_value</span>[<span style=color:#a6e22e>upload_tmp_dir</span>] <span style=color:#f92672>=</span> <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span><span style=color:#a6e22e>www</span><span style=color:#f92672>/</span><span style=color:#a6e22e>nextcloud</span><span style=color:#f92672>/</span><span style=color:#a6e22e>tmp</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>php_admin_value</span>[<span style=color:#a6e22e>sendmail_path</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/usr/sbin/sendmail -t -i -VotreNomDeServeur&#34;</span>
</span></span></code></pre></div><h3 id=cr√©ation-du-vhost>Cr√©ation du Vhost<a hidden class=anchor aria-hidden=true href=#cr√©ation-du-vhost>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/apache2/sites-available/VotreNomNextcloud.conf
</span></span></code></pre></div><p>Ajoutez le contenu suivant :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-apache data-lang=apache><span style=display:flex><span><span style=color:#f92672>&lt;Directory</span> <span style=color:#e6db74>/var/www/nextcloud</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        AllowOverride <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>        Require <span style=color:#66d9ef>all</span> denied
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/Directory&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;VirtualHost</span> <span style=color:#e6db74>*:80</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                DocumentRoot <span style=color:#e6db74>/var/www/nextcloud/web</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                ServerName VotreNomDeServeur
</span></span><span style=display:flex><span>                ServerAdmin webmaster@VotreNomDeServeur
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                CustomLog <span style=color:#e6db74>/var/www/nextcloud/log/access.log</span> combined
</span></span><span style=display:flex><span>                ErrorLog <span style=color:#e6db74>/var/www/nextcloud/log/error.log</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                SetEnvIf Authorization <span style=color:#e6db74>&#34;(.*)&#34;</span> HTTP_AUTHORIZATION=$1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;Directory</span> <span style=color:#e6db74>/var/www/nextcloud/web</span><span style=color:#f92672>&gt;</span>                   
</span></span><span style=display:flex><span>                    Options +FollowSymLinks -Indexes
</span></span><span style=display:flex><span>                    AllowOverride <span style=color:#66d9ef>All</span>
</span></span><span style=display:flex><span>                    Require <span style=color:#66d9ef>all</span> granted
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/Directory&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;Directory</span> <span style=color:#e6db74>/var/www/nextcloud/web</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;FilesMatch</span> <span style=color:#e6db74>&#34;.+\.ph(p[3457]?|t|tml)$&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                        SetHandler <span style=color:#e6db74>&#34;proxy:unix:/run/php/VotreNomDeServeur.sock|fcgi://localhost&#34;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;/FilesMatch&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/Directory&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;IfModule</span> <span style=color:#e6db74>mod_dav_fs.c</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e># Do not execute PHP files in webdav directory</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;Directory</span> <span style=color:#e6db74>/var/www/nextcloud/webdav</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&lt;FilesMatch</span> <span style=color:#e6db74>&#34;\.ph(p3?|tml)$&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                            SetHandler <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>                        <span style=color:#f92672>&lt;/FilesMatch&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;/Directory&gt;</span>
</span></span><span style=display:flex><span>                    DavLockDB <span style=color:#e6db74>/var/www/nextcloud/tmp/DavLock</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/IfModule&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;IfModule</span> <span style=color:#e6db74>mod_headers.c</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                Header always set X-Content-Type-Options <span style=color:#e6db74>&#34;nosniff&#34;</span>
</span></span><span style=display:flex><span>                Header always set X-Frame-Options <span style=color:#e6db74>&#34;DENY&#34;</span>
</span></span><span style=display:flex><span>                Header always set X-XSS-Protection <span style=color:#e6db74>&#34;1; mode=block&#34;</span>
</span></span><span style=display:flex><span>                Header always set Referrer-Policy <span style=color:#e6db74>&#34;no-referrer&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/IfModule&gt;</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            Protocols h2 h2c http/1.1
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/VirtualHost&gt;</span>
</span></span></code></pre></div><p>On execute ensuite :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>a2ensite VotreNomDeServeur
</span></span></code></pre></div><h3 id=optimisation-apache--php>Optimisation Apache & PHP<a hidden class=anchor aria-hidden=true href=#optimisation-apache--php>#</a></h3><p>On ouvre le fichier suivant :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/apache2/conf-enabled/security.conf
</span></span></code></pre></div><p>On modifie ces 2 lignes :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ServerTokens Prod
</span></span><span style=display:flex><span>ServerSignature Off
</span></span></code></pre></div><p>Ensuite dans le fichier <em>opcahce.ini</em> on va ajouter ceci :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano /etc/php/8.2/fpm/conf.d/10-opcache.ini
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>opcache.enable<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>opcache.enable_cli<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>opcache.memory_consumption<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span>
</span></span><span style=display:flex><span>opcache.interned_strings_buffer<span style=color:#f92672>=</span><span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>opcache.max_accelerated_files<span style=color:#f92672>=</span><span style=color:#ae81ff>60229</span>
</span></span><span style=display:flex><span>opcache.max_wasted_percentage<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>opcache.revalidate_freq<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>opcache.fast_shutdown<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>opcache.enable_file_override<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>opcache.max_file_size<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>opcache.jit <span style=color:#f92672>=</span> <span style=color:#ae81ff>1255</span>
</span></span><span style=display:flex><span>opcache.jit_buffer_size <span style=color:#f92672>=</span> 128M
</span></span></code></pre></div><p>On execute ensuite √† la suite ces commandes :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>a2dismod php8.2
</span></span><span style=display:flex><span><span style=color:#75715e>#(Ligne suivante optionnelle si demand√©e)</span>
</span></span><span style=display:flex><span>a2dismod php7.4
</span></span><span style=display:flex><span>a2dismod mpm_prefork
</span></span><span style=display:flex><span>a2enmod mpm_event
</span></span><span style=display:flex><span>systemctl restart apache2
</span></span><span style=display:flex><span>a2enmod http2
</span></span><span style=display:flex><span>systemctl restart apache2
</span></span></code></pre></div><h3 id=6-configuration-de-nextcloud-via-le-navigateur>6. Configuration de Nextcloud via le navigateur<a hidden class=anchor aria-hidden=true href=#6-configuration-de-nextcloud-via-le-navigateur>#</a></h3><h4 id=1-acc√©dez-√†-lurl-de-votre-nextcloud->1. Acc√©dez √† l&rsquo;URL de votre Nextcloud :<a hidden class=anchor aria-hidden=true href=#1-acc√©dez-√†-lurl-de-votre-nextcloud->#</a></h4><p>Ouvrez un navigateur web et allez √† <a href=http://votre-domaine.com>http://votre-domaine.com</a> ou http://adresse-ip.</p><h4 id=2-compl√©tez-la-configuration-via-linterface-web->2. Compl√©tez la configuration via l&rsquo;interface web :<a hidden class=anchor aria-hidden=true href=#2-compl√©tez-la-configuration-via-linterface-web->#</a></h4><ul><li>Cr√©er un compte administrateur : Entrez un nom d&rsquo;utilisateur et un mot de passe pour le compte administrateur.</li><li>Configuration de la base de donn√©es : S√©lectionnez MySQL/MariaDB, entrez les informations de la base de donn√©es (nom de la base de donn√©es, utilisateur, mot de passe).</li><li>Terminez l&rsquo;installation en cliquant sur &ldquo;Terminer l&rsquo;installation&rdquo;.</li></ul><h3 id=7configuration-du-pare-feu-optionnel>7.Configuration du pare-feu (optionnel)<a hidden class=anchor aria-hidden=true href=#7configuration-du-pare-feu-optionnel>#</a></h3><p>Si vous utilisez ufw pour g√©rer votre pare-feu, autorisez le trafic HTTP et HTTPS :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ufw allow 80/tcp
</span></span><span style=display:flex><span>sudo ufw allow 443/tcp
</span></span><span style=display:flex><span>sudo ufw enable
</span></span></code></pre></div><h2 id=conclusions>Conclusions<a hidden class=anchor aria-hidden=true href=#conclusions>#</a></h2><p>Votre installation de Nextcloud est maintenant termin√©e et devrait √™tre op√©rationnelle. Si vous avez des questions suppl√©mentaires ou rencontrez des probl√®mes, n&rsquo;h√©sitez pas √† envoyer des demandes sur mon d√©p√¥t GitHub. Je serai ravi de vous aider !</p><h3 id=bonus-tableau-raid>Bonus Tableau RAID<a hidden class=anchor aria-hidden=true href=#bonus-tableau-raid>#</a></h3><table><thead><tr><th>Type de RAID</th><th>Nombre de disques</th><th>D√©faillances de disques tol√©rables</th><th>Description</th><th>Capacit√© de stockage</th></tr></thead><tbody><tr><td>SHR</td><td>1</td><td>0</td><td>Optimise la taille du volume lorsque des disques de diff√©rentes tailles sont associ√©s. Fournit la redondance des donn√©es si le volume est compos√© de deux disques ou plus. Recommand√© pour les utilisateurs d√©butants.</td><td>1 x (taille du disque)</td></tr><tr><td></td><td>2-3</td><td>1</td><td>Optimis√© par le syst√®me.</td><td></td></tr><tr><td></td><td>‚âß4</td><td>1-2</td><td></td><td></td></tr><tr><td>Basic</td><td>1</td><td>0</td><td>Compos√© d&rsquo;un disque en tant qu&rsquo;unit√© ind√©pendante. Ne dispose pas de la redondance des donn√©es.</td><td>1 x (taille du disque)</td></tr><tr><td>JBOD</td><td>‚âß1</td><td>0</td><td>Combine une collection de disques en un espace de stockage unique avec une capacit√© √©gale √† la somme des capacit√©s des disques. Ne dispose pas de la redondance des donn√©es.</td><td>Somme des tailles de tous les disques</td></tr><tr><td>RAID 0</td><td>‚âß2</td><td>0</td><td>Propose ¬´ l&rsquo;agr√©gation par bandes ¬ª, un processus consistant √† diviser les donn√©es en blocs et √† r√©partir ces blocs sur plusieurs disques pour am√©liorer les performances. Ne dispose pas de la redondance des donn√©es.</td><td>Somme des tailles de tous les disques</td></tr><tr><td>RAID 1</td><td>2</td><td>1</td><td>√âcrit des donn√©es identiques sur tous les disques simultan√©ment. Fournit la redondance des donn√©es.</td><td>Taille du plus petit disque</td></tr><tr><td></td><td>3</td><td>2</td><td></td><td></td></tr><tr><td></td><td>4</td><td>3</td><td></td><td></td></tr><tr><td>RAID 5</td><td>‚âß3</td><td>1</td><td>Met en ≈ìuvre l&rsquo;agr√©gation par bandes au niveau des blocs, avec la parit√© des donn√©es distribu√©e sur tous les disques membres, fournissant ainsi une redondance des donn√©es plus efficace que RAID 1.</td><td>(N - 1) x (taille du plus petit disque)</td></tr><tr><td>RAID 6</td><td>‚âß4</td><td>2</td><td>Impl√©mente deux couches de parit√© de donn√©es pour stocker des donn√©es redondantes de la taille de deux disques, fournissant un degr√© sup√©rieur de redondance des donn√©es par rapport √† RAID 5. Prend en charge la cr√©ation d&rsquo;un volume Btrfs d&rsquo;une taille maximale de 1 Po, disponible uniquement sur certains mod√®les de Synology NAS et dans des conditions sp√©cifiques.</td><td>(N - 2) x (taille du plus petit disque)</td></tr><tr><td>RAID 10</td><td>‚âß4 (nombre pair)</td><td>0</td><td>Fournit la performance de RAID 0 et le niveau de protection des donn√©es de RAID 1, combinant les disques en groupes de deux dans lesquels les donn√©es sont dupliqu√©es en miroir.</td><td>(N / 2) x (taille du plus petit disque)</td></tr><tr><td>RAID F1</td><td>‚âß3</td><td>1</td><td>Impl√©mente l&rsquo;agr√©gation par bandes au niveau des blocs, avec la parit√© des donn√©es distribu√©e sur tous les disques membres. √âcrit davantage d&rsquo;informations de parit√© sur un certain disque. Recommand√© pour les matrices exclusivement en flash.</td><td>(N - 1) x (taille du plus petit SSD)</td></tr></tbody></table><h2 id=glossaire>Glossaire<a hidden class=anchor aria-hidden=true href=#glossaire>#</a></h2><h3 id=apache>Apache<a hidden class=anchor aria-hidden=true href=#apache>#</a></h3><p><strong>Description</strong> : Serveur web open-source qui fournit des fonctionnalit√©s robustes pour servir des pages web. Apache est souvent utilis√© pour h√©berger des sites web dynamiques, comme Nextcloud.</p><p><strong>Commandes cl√©s</strong> : <code>a2enmod</code>, <code>a2dismod</code>, <code>a2ensite</code>, <code>a2dissite</code></p><h3 id=php>PHP<a hidden class=anchor aria-hidden=true href=#php>#</a></h3><p><strong>Description</strong> : Langage de script open-source principalement utilis√© pour le d√©veloppement web c√¥t√© serveur. PHP est essentiel pour ex√©cuter des scripts sur le serveur web, comme ceux utilis√©s par Nextcloud.</p><p><strong>Commandes cl√©s</strong> : <code>php -v</code>, <code>php.ini</code>, <code>php-fpm</code></p><h3 id=mariadb>MariaDB<a hidden class=anchor aria-hidden=true href=#mariadb>#</a></h3><p><strong>Description</strong> : Syst√®me de gestion de base de donn√©es relationnelle open-source, utilis√© comme alternative √† MySQL. MariaDB est utilis√© pour stocker les donn√©es de Nextcloud.</p><p><strong>Commandes cl√©s</strong> : <code>mysql</code>, <code>mysql_secure_installation</code>, <code>CREATE DATABASE</code>, <code>GRANT PRIVILEGES</code></p><h3 id=raid>RAID<a hidden class=anchor aria-hidden=true href=#raid>#</a></h3><p><strong>Description</strong> : Technologie qui permet de combiner plusieurs disques durs en un seul volume logique pour am√©liorer les performances ou la redondance des donn√©es. RAID peut √™tre configur√© de diff√©rentes mani√®res pour atteindre des objectifs sp√©cifiques.</p><h3 id=php-fpm-fastcgi-process-manager>PHP-FPM (FastCGI Process Manager)<a hidden class=anchor aria-hidden=true href=#php-fpm-fastcgi-process-manager>#</a></h3><p><strong>Description</strong> : Alternative √† l&rsquo;ex√©cution de PHP via le module mod_php dans Apache. PHP-FPM g√®re les processus PHP de mani√®re plus efficace, ce qui est souvent utilis√© avec des configurations √† haute charge.</p><h3 id=ssl-secure-sockets-layer>SSL (Secure Sockets Layer)<a hidden class=anchor aria-hidden=true href=#ssl-secure-sockets-layer>#</a></h3><p><strong>Description</strong> : Protocole de s√©curit√© pour chiffrer les donn√©es √©chang√©es entre un serveur web et un client, garantissant la confidentialit√© et l&rsquo;int√©grit√© des informations. Utilis√© pour s√©curiser les connexions HTTPS.</p><h3 id=ufw-uncomplicated-firewall>UFW (Uncomplicated Firewall)<a hidden class=anchor aria-hidden=true href=#ufw-uncomplicated-firewall>#</a></h3><p><strong>Description</strong> : Interface pour g√©rer le pare-feu sur les syst√®mes Ubuntu et Debian. Permet de configurer les r√®gles de filtrage de mani√®re simple.</p><h3 id=nextcloud>Nextcloud<a hidden class=anchor aria-hidden=true href=#nextcloud>#</a></h3><p><strong>Description</strong> : Plateforme open-source pour la gestion de fichiers, le stockage et la collaboration en ligne. Permet de stocker, synchroniser et partager des fichiers ainsi que de collaborer avec des outils int√©gr√©s comme des calendriers et des contacts.</p><h3 id=debian>Debian<a hidden class=anchor aria-hidden=true href=#debian>#</a></h3><p><strong>Description</strong> : Distribution Linux stable et largement utilis√©e, connue pour sa robustesse et sa flexibilit√©. Debian est souvent le choix pr√©f√©r√© pour les serveurs.</p><h3 id=ssh-secure-shell>SSH (Secure Shell)<a hidden class=anchor aria-hidden=true href=#ssh-secure-shell>#</a></h3><p><strong>Description</strong> : Protocole de communication s√©curis√© pour acc√©der √† des serveurs √† distance. Utilis√© pour les connexions s√©curis√©es en ligne de commande.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=//localhost:1313/procedures/glpi/><span class=title>¬´ Prev</span><br><span></span>
</a><a class=next href=//localhost:1313/procedures/pki/><span class=title>Next ¬ª</span><br><span></span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=//localhost:1313/>üî• Nicolas Wailly AIS DevOPs üî•</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>